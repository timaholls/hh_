# Система анализа резюме с использованием OpenAI

Автоматизированная система для анализа резюме кандидатов и выбора наиболее подходящих на основе описания вакансии. Проект использует OpenAI API для оценки соответствия кандидатов требованиям вакансии.

## Обзор проекта

Система решает задачу автоматизации первичного отбора кандидатов на вакансию путем анализа их резюме. Для демонстрации работы система может генерировать тестовые данные: описание вакансии и набор из 100 резюме кандидатов разного уровня соответствия.

### Основные возможности

- **Генерация данных:** создание тестового описания вакансии и резюме кандидатов с использованием OpenAI
- **Анализ резюме:** оценка соответствия каждого резюме требованиям вакансии по шкале от 0 до 10
- **Ранжирование кандидатов:** выбор лучшего кандидата и формирование топ-5 подходящих кандидатов
- **Система логирования:** подробное логирование всех этапов работы с возможностью анализа результатов
- **Визуализация и отчеты:** создание отчетов в формате MD и JSON, графики по результатам анализа

## Структура проекта

```
resume_analyzer/
├── main.py               # Основной модуль, координирующий работу системы
├── analyzer.py           # Анализатор резюме - сравнивает резюме с вакансией
├── data_generator.py     # Генератор тестовых данных (вакансий и резюме)
├── llm_interface.py      # Интерфейс взаимодействия с OpenAI API
├── log_analyzer.py       # Инструмент для анализа логов и управления ими
├── logs/                 # Директория с лог-файлами
├── reports/              # Директория с отчетами по анализу логов
└── data/                 # Директория для данных
    ├── vacancy/          # Директория для файлов с описанием вакансии
    └── resumes/          # Директория для файлов с резюме кандидатов
```

## Описание модулей

### main.py

Центральный модуль системы, который:
- Инициализирует все компоненты и настраивает логирование
- Координирует процесс генерации данных
- Запускает анализ резюме
- Обрабатывает и сохраняет результаты
- Управляет выводом и форматированием результатов
- Обрабатывает исключения и ошибки

Основной класс: `ResumeAnalyzerApp`

### analyzer.py

Модуль анализа резюме, который:
- Сравнивает текст резюме с требованиями вакансии
- Формирует оценку соответствия по 10-балльной шкале
- Составляет обоснование для каждой оценки
- Реализует отказоустойчивый механизм анализа
- Измеряет производительность и время обработки

Основной класс: `ResumeAnalyzer`

### data_generator.py

Модуль генерации тестовых данных:
- Создает реалистичные описания вакансий
- Генерирует различные резюме с разным уровнем соответствия вакансии
- Распределяет качество резюме (20% высокое, 50% среднее, 30% низкое)
- Собирает статистику процесса генерации

Основной класс: `DataGenerator`

### llm_interface.py

Модуль для работы с OpenAI API:
- Формирует запросы к языковой модели
- Преобразует ответы модели в структурированные данные
- Обрабатывает ошибки API и сетевые сбои
- Управляет задержками между запросами для соблюдения лимитов API

Основной класс: `LLMInterface`

### log_analyzer.py

Инструмент для анализа лог-файлов:
- Извлекает метрики выполнения из логов
- Строит графики времени выполнения и распределения оценок
- Формирует статистические отчеты
- Визуализирует результаты анализа
- Отображает информацию о доступных логах
- Позволяет очищать старые лог-файлы

## Принцип работы

### 1. Инициализация и подготовка данных

При запуске программы происходит:
- Настройка логирования
- Проверка наличия существующих данных
- Генерация недостающих данных (если требуется)

### 2. Генерация тестовых данных

Если данные отсутствуют или неполные:
- Создается описание вакансии с помощью OpenAI
- Генерируется 100 резюме с различным уровнем соответствия вакансии
- Данные сохраняются в соответствующих директориях

### 3. Процесс анализа резюме

Для каждого резюме:
- Загружается текст резюме и вакансии
- Выполняется анализ с помощью OpenAI API
- Формируется оценка и обоснование
- Результаты сохраняются для дальнейшей обработки

### 4. Обработка и сохранение результатов

После анализа всех резюме:
- Результаты ранжируются по оценке
- Выбирается лучший кандидат и топ-5
- Данные форматируются и выводятся на экран
- Результаты автоматически сохраняются в файлы results.md и results.json
- Все действия записываются в лог-файл

## Система логирования

Проект оснащен подробной системой логирования, которая:
- Записывает каждое действие системы
- Отслеживает время выполнения операций
- Фиксирует оценки и результаты анализа
- Регистрирует ошибки и предупреждения

Лог-файлы сохраняются в директории `logs/` с именами, содержащими дату и время создания.

## Использование

### Запуск анализа резюме

```bash
python -m resume_analyzer.main
```

### Просмотр информации о логах

```bash
python -m resume_analyzer.log_analyzer --info
```

### Анализ логов и создание отчетов

```bash
python -m resume_analyzer.log_analyzer --latest
```

### Очистка старых логов

```bash
python -m resume_analyzer.log_analyzer --clean
```

### Список всех доступных лог-файлов

```bash
python -m resume_analyzer.log_analyzer --list-logs
```

## Результаты работы

Система создает два файла с результатами:

1. **results.md** - читаемый отчет в формате Markdown с форматированным представлением результатов, включая:
   - Информацию о лучшем кандидате
   - Список топ-5 кандидатов с оценками и обоснованиями
   - Дату проведения анализа

2. **results.json** - структурированные данные для программного использования, содержащие:
   - Информацию о лучшем кандидате
   - Массив данных о топ-5 кандидатах
   - Метаданные о проведенном анализе

## Технические требования

- Python 3.6+
- Необходимые библиотеки:
  - openai>=1.0.0 - для работы с OpenAI API
  - python-dotenv>=1.0.0 - для загрузки переменных окружения
  - pandas>=2.0.0 - для анализа данных и логов
  - matplotlib>=3.6.0 - для построения графиков
- Активный OpenAI API ключ

## Установка и настройка

1. **Установка зависимостей**
   ```bash
   pip install -r requirements.txt
   ```

2. **Настройка API-ключа**
   - Создайте файл `.env` в корневой директории проекта
   - Добавьте строку `OPENAI_API_KEY=ваш_ключ_api`

## Расширение функциональности

Проект имеет модульную структуру, что позволяет легко расширять его возможности:

1. **Добавление новых моделей анализа**
   - Расширение llm_interface.py для поддержки других API
   - Реализация альтернативных методов оценки резюме

2. **Интеграция с внешними системами**
   - Добавление поддержки импорта резюме из HR-систем
   - Экспорт результатов в CRM или ATS

3. **Улучшение анализа данных**
   - Внедрение более сложных метрик оценки соответствия
   - Добавление сегментации кандидатов по категориям

## Отказоустойчивость

Система реализует несколько механизмов отказоустойчивости:
- Обработка ошибок API и сетевых сбоев
- Запасной метод анализа при проблемах с основным
- Сохранение промежуточных результатов
- Детальное логирование для отладки проблем 